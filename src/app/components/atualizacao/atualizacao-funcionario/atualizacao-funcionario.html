<section class="cadastro-section">
	<div *ngIf="loading" class="info-msg">Carregando dados do funcionário...</div>
	<div *ngIf="!loading && loadError" class="error-msg">{{ loadError }}</div>
	<h2>Atualizar funcionário</h2>

	<form class="cadastro-form" (ngSubmit)="onSubmit(form)" #form="ngForm">
		<label for="nome">Nome completo:</label><br>
		<input type="text" id="nome" name="nome" [(ngModel)]="user.nome"><br>

		<label for="cpf">CPF:</label><br>
		<input
			type="text"
			id="cpf"
			name="cpf"
			maxlength="14"
			(input)="mascaraCPF($event)"
			placeholder="000.000.000-00"
			[(ngModel)]="user.cpf">
		<br>

		<label for="dtNascimento">Data de Nascimento:</label><br>
		<input type="date" id="dtNascimento" name="dtNascimento" [(ngModel)]="user.dtNascimento"><br>

		<label>Sexo:</label><br>
		<label>
			<input type="radio" name="sexo" value="MASCULINO" [(ngModel)]="user.sexo">
			Masculino
		</label><br>
		<label>
			<input type="radio" name="sexo" value="FEMININO" [(ngModel)]="user.sexo">
			Feminino
		</label><br>
		<label>
			<input type="radio" name="sexo" value="OUTRO" [(ngModel)]="user.sexo">
			Outro
		</label><br>

		<label for="funcao">Função:</label><br>
		<select id="funcao" name="funcao" [(ngModel)]="user.funcao">
			<option value="" disabled>Selecione uma função</option>
			<option value="ADMINISTRADOR">Administrador</option>
			<option value="BIBLIOTECARIO">Bibliotecário</option>
		</select>
		<br>

		<label for="email">E-mail:</label><br>
		<input class="small-input" type="email" id="email" name="email" [(ngModel)]="user.email"><br>
		<br>

		<label for="telefone">Telefone:</label><br>
		<input type="tel" id="telefone" name="telefone" [(ngModel)]="user.telefone"><br>
		<br>

		<label for="Endereco">Endereço:</label><br>
		<input type="text" id="Endereco" name="Endereco" [(ngModel)]="user.endereco.nomeLogradouro"><br>
		<br>
		<label for="Numero">Número:</label><br>
		<input type="text" id="Numero" name="Numero" [(ngModel)]="user.endereco.numero"><br>
		<br>
		<label for="Complemento">Complemento:</label><br>
		<input type="text" id="Complemento" name="Complemento" [(ngModel)]="user.endereco.complemento"><br>
		<br>
		<label for="Bairro">Bairro:</label><br>
		<input type="text" name="bairro" maxlength="50" required [(ngModel)]="user.endereco.bairro"><br>
		<br>
		<label for="CEP">CEP:</label><br>
		<input type="text" name="cep" maxlength="8" placeholder="00000-000" required [(ngModel)]="user.endereco.cep"><br>
		<br>
		<label for="Cidade">Cidade:</label><br>
		<input type="text" name="cidade" maxlength="50" required [(ngModel)]="user.endereco.cidade"><br>
		<br>
		<label for="idEstado">Estado (UF):</label><br>
		<select id="idEstado" name="idEstado" [(ngModel)]="user.endereco.idEstado">
			<option value="">Selecione um estado</option>
			<option *ngFor="let estado of estados" [value]="estado.idEstado">{{ estado.nome }}</option>
		</select><br>
		<br>

		<label for="senha">Senha:</label><br>
		<input type="password" id="senha" name="senha" [(ngModel)]="user.senha" placeholder="Digite uma nova senha ou a senha atual" autocomplete="new-password"><br>
		<br>
		<div class="cadastro-buttons">
			<button type="button" class="btn btn-cancelar" (click)="cancelar()">Cancelar</button>
			<button type="submit" class="btn btn-salvar">Salvar</button>
		</div>
	</form>
</section>

<style>
	.cadastro-buttons { display:flex; justify-content:center; gap:10px; }
	.btn { padding:10px 20px; font-size:16px; cursor:pointer; }
	.btn-cancelar { background-color:#ccc; border:none; color:#000; }
	.btn-salvar { background-color:#f97316; border:none; color:#fff; }
	.info-msg { text-align:center; margin-bottom:10px; font-size:14px; color:#334155; }
	.error-msg { text-align:center; margin-bottom:10px; font-size:14px; color:#dc2626; font-weight:600; }
</style>
