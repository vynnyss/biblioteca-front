<div class="lista-autores">
	<h3>Autores</h3>

	<div class="filters">
		<label>
			Nome
			<input type="text" [(ngModel)]="nameQuery" (input)="applyFilters()" placeholder="Pesquisar por nome" />
		</label>

		<label>
			Status
			<select [(ngModel)]="statusFilter" (change)="applyFilters()">
				<option value="">Todos</option>
				<option *ngFor="let s of availableStatuses" [value]="s">{{ s }}</option>
			</select>
		</label>

		<button class="btn btn-outline" type="button" (click)="clearFilters()">Limpar</button>
	</div>

	<div *ngIf="autores?.length; else empty">
		<table class="table-autores">
			<thead>
				<tr>
					<th>ID</th>
					<th>Nome</th>
					<th>Status</th>
					<th>Ações</th>
				</tr>
			</thead>
			<tbody>
                <tr *ngFor="let autor of autores">
                    <td>{{ getId(autor) }}</td>
                    <td>{{ getName(autor) }}</td>
                    <td>{{ getStatus(autor) }}</td>
					<td>
						<button 
							class="btn-icon" 
							type="button" 
							(click)="iniciarEdicao(autor)"
							title="Editar nome">
							✏️
						</button>
					</td>
                </tr>
			</tbody>
		</table>
	</div>

	<ng-template #empty>
		<p>Nenhum autor encontrado.</p>
	</ng-template>

	<!-- Modal de edição -->
	<div class="modal-overlay" *ngIf="editandoId !== null" (click)="cancelarEdicao()">
		<div class="modal-content" (click)="$event.stopPropagation()">
			<h4>Editar Nome do Autor</h4>
			<label>
				Nome
				<input 
					type="text" 
					[(ngModel)]="novoNome" 
					placeholder="Digite o novo nome"
					class="input-nome" />
			</label>
			<div class="modal-actions">
				<button class="btn btn-primary" type="button" (click)="salvarEdicao()">Salvar</button>
				<button class="btn btn-outline" type="button" (click)="cancelarEdicao()">Cancelar</button>
			</div>
		</div>
	</div>
</div>
