<div class="lista-idiomas">
	<h3>Idiomas</h3>

	<div class="filters">
		<label>
			Nome
			<input type="text" [(ngModel)]="nameQuery" (input)="applyFilters()" placeholder="Pesquisar por nome" />
		</label>

		<label>
			Status
			<select [(ngModel)]="statusFilter" (change)="applyFilters()">
				<option value="">Todos</option>
				<option *ngFor="let s of availableStatuses" [value]="s">{{ s }}</option>
			</select>
		</label>

		<button class="btn btn-outline" type="button" (click)="clearFilters()">Limpar</button>
	</div>

	<div *ngIf="idiomas.length; else empty">
		<table class="table-idiomas">
			<thead>
				<tr>
					<th>ID</th>
					<th>Nome</th>
					<th>Status</th>
					<th>Ações</th>
				</tr>
			</thead>
			<tbody>
                <tr *ngFor="let idioma of idiomas">
                    <td>{{ getId(idioma) }}</td>
                    <td>{{ getName(idioma) }}</td>
                    <td>{{ getStatus(idioma) }}</td>
					<td>
						<button 
							class="btn-icon" 
							type="button" 
							(click)="iniciarEdicao(idioma)"
							title="Editar nome">
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
								<path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>
							</svg>
						</button>
						<button 
							class="btn-icon btn-icon-delete" 
							type="button" 
							(click)="inativarIdioma(idioma)"
							title="Inativar idioma">
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
								<polyline points="3 6 5 6 21 6"></polyline>
								<path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
							</svg>
						</button>
					</td>
                </tr>
			</tbody>
		</table>
	</div>

	<ng-template #empty>
		<p>Nenhum idioma encontrado.</p>
	</ng-template>

	<!-- Modal de edição -->
	<div class="modal-overlay" *ngIf="editandoId !== null" (click)="cancelarEdicao()">
		<div class="modal-content" (click)="$event.stopPropagation()">
			<h4>Editar Nome do Idioma</h4>
			<label>
				Nome
				<input 
					type="text" 
					[(ngModel)]="novoNome" 
					placeholder="Digite o novo nome"
					class="input-nome" />
			</label>
			<div class="modal-actions">
				<button class="btn btn-primary" type="button" (click)="salvarEdicao()">Salvar</button>
				<button class="btn btn-outline" type="button" (click)="cancelarEdicao()">Cancelar</button>
			</div>
		</div>
	</div>
</div>
